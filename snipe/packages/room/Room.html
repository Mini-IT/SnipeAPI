<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"/><link href="../../../bootstrap/css/bootstrap.min.css" rel="stylesheet"/><link href="../../../bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet"/><link href="../../../bootstrap/css/bootstrap-select.min.css" rel="stylesheet"/><link href="http://fonts.googleapis.com/css?family=Open+Sans:400,700,700italic,400italic" rel="stylesheet" type="text/css"/><link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600,600italic,400" rel="stylesheet" type="text/css"/><link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css" rel="stylesheet" type="text/css"/><script src="../../../jquery-1.9.1.min.js"></script><script src="../../../bootstrap/js/bootstrap.min.js"></script><script src="../../../bootstrap/js/bootstrap-select.min.js"></script><link href="../../../styles.css" rel="stylesheet"/><script type="text/javascript">var dox = {rootPath: "../../../",platforms: ["uniserver","stats","index","script"]};</script><script type="text/javascript" src="../../..//nav.js"></script><script type="text/javascript" src="../../..//index.js"></script><link rel="icon" href="../../..//favicon.png" type="image/png"></link><title>snipe.packages.room.Room</title></head><body><nav class="navbar dark navbar-static-top" role="navigation">  <div class="container" style="height:45px;">   <div class="navbar-header"><!--
	    <a class="brand" href="http://haxe.org/"><img src="http://haxe.org/img/haxe-logo-horizontal-on-dark.svg" width="107" height="21" alt="Haxe" onerror="this.src='http://haxe.org/img/haxe-logo-horizontal-on-dark.png'"/></a>-->
        <span class="tagline"><a href="/">Snipe Server API Documentation</a></span><div class="pull-right"><!--
			<a href="http://haxe.org/download/" target="_blank">Download</a> |
			<a href="http://haxe.org/manual/" target="_blank">Read the manual</a>
-->
</div>   </div>  </div></nav><div class="container">        <div class="row-fluid">            <div class="span3">              <div class="well sidebar-nav">                <form class="form-search" id="searchForm">                  <div class="input-prepend input-block-level">                    <span class="add-on"><i class="icon-search"></i></span>                    <input id="search" type="text" placeholder="Search" autocomplete="off"/>                  </div>                </form><!--
				<div class="dropdown">
					<select id="select-platform" class="selectpicker" title="Filter by platform" data-width="100%">
						<option value="all" selected="true">All Platforms</option>
						::foreach i api.config.platforms::
							<option>::i::</option>
						::end::
					</select>
				</div>
-->
</div>              <div class="well sidebar-nav">                <div id="nav"></div>              </div>            </div>            <div class="span9"><div class="page-header">                    <h4><small>package snipe.packages.room</small></h4>    <h1>            <small>class</small>            Room        </h1>                                </div><div class="body">        <div class="doc doc-main">            <div class="indent">                <p>Room class. Should be extended by the actual room implementation.</p>
<p>Note: The room class that extends this one can make a convenience link to the proper game (or slave) server class in its constructor like this:</p>
<pre><code>var server: ServerTest;

public function new(s, t, vid)
  {
    super(s, t, vid);
    server = cast _server;
  }</code></pre>            </div>        </div>                                                                                                                                                                                                                                                    <h3 class="section">Constructor</h3>        <div class="fields">                                                                                                                                                                                                                                                                                                                    <div class="field "><a name="new"></a><h3><p><code>    <a href="#new"><span class="identifier">new</span></a> (s:<a class="type" title="Slave server class." href="../../../snipe/slave/Server.html">Server</a>, t:<a class="type" title="Room type description." href="../../../snipe/packages/room/_RoomType.html">_RoomType</a>, vid:<a class="type" title="The standard Int type." href="../../../Int.html">Int</a>)</code></p></h3><div class="doc"><p></p></div></div>                                                                                                                                                                                                                                                                                                                                                                                                                        </div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <h3 class="section">Fields</h3>        <div class="fields">                                                                        <div class="field "><a name="_clients"></a><h3><p><code>                        <span class="label">read only</span>                        <a href="#_clients"><span class="identifier">_clients</span></a>:<a class="type" title="An Array is a storage for values." href="../../../Array.html">Array</a>&lt;<a class="type" title="Client information class." href="../../../snipe/slave/ClientInfo.html">ClientInfo</a>&gt;</code></p></h3><div class="doc"><p>Clients attached to the room.</p></div></div>                                                                                            <div class="field "><a name="_server"></a><h3><p><code>                                    <a href="#_server"><span class="identifier">_server</span></a>:<a class="type" title="Slave server class." href="../../../snipe/slave/Server.html">Server</a></code></p></h3><div class="doc"><p>Game server instance link.</p></div></div>                                                                                            <div class="field "><a name="id"></a><h3><p><code>                                    <a href="#id"><span class="identifier">id</span></a>:<a class="type" title="The standard Int type." href="../../../Int.html">Int</a></code></p></h3><div class="doc"><p>Unique room ID.</p></div></div>                                                                                            <div class="field "><a name="isDead"></a><h3><p><code>                                    <a href="#isDead"><span class="identifier">isDead</span></a>:<a class="type" title="The standard Boolean type, which can either be true or false." href="../../../Bool.html">Bool</a></code></p></h3><div class="doc"><p>Marks this room as dead when set to true. This should be set to true when the room is no longer needed.</p>
<p><code><a href="../../../snipe/packages/room/Room.html#tick">Room.tick</a>()</code> stops working and no updates and notifications will be sent to room clients anymore. Keep in mind that <code><a href="../../../snipe/packages/room/Room.html#leavePost">Room.leavePost</a>()</code> callback will not be executed for any clients.</p></div></div>                                                                                            <div class="field "><a name="typeID"></a><h3><p><code>                                    <a href="#typeID"><span class="identifier">typeID</span></a>:<a class="type" title="The basic String class." href="../../../String.html">String</a></code></p></h3><div class="doc"><p>Room type string ID.</p></div></div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <h3 class="section">Methods</h3>        <div class="fields">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <div class="field "><a name="broadcast"></a><h3><p><code>    <span class="label">inline</span> <a href="#broadcast"><span class="identifier">broadcast</span></a> (type:<a class="type" title="The basic String class." href="../../../String.html">String</a>, msg:<a class="type" title="Dynamic is a special type which is compatible with all other types." href="../../../Dynamic.html">Dynamic</a>):<a class="type" title="The standard Void type." href="../../../Void.html">Void</a></code></p></h3><div class="doc"><p>Broadcasts the message to all clients in this room</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>type</code> <p>Message type.</p>        </div>            <div class="indent inline-content">            <code>msg</code> <p>Message parameters.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="createPost"></a><h3><p><code>    <span class="label">dynamic</span> <a href="#createPost"><span class="identifier">createPost</span></a> ():<a class="type" title="The standard Void type." href="../../../Void.html">Void</a></code></p></h3><div class="doc"><p>This hook is called after the room is created.</p></div></div>                                                                                                                            <div class="field "><a name="event"></a><h3><p><code>    <span class="label">dynamic</span> <a href="#event"><span class="identifier">event</span></a> (msg:<a class="type" title="Dynamic is a special type which is compatible with all other types." href="../../../Dynamic.html">Dynamic</a>):<a class="type" title="The standard Void type." href="../../../Void.html">Void</a></code></p></h3><div class="doc"><p>This hook should handle remote room notifications sent with <code>snipe.package.room.SlaveModule.notify()</code>.</p>
<p>It can also be used to communicate with the room instance locally.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>msg</code> <p>Notification message.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="join"></a><h3><p><code>    <a href="#join"><span class="identifier">join</span></a> (c:<a class="type" title="Client information class." href="../../../snipe/slave/ClientInfo.html">ClientInfo</a>):<a class="type" title="The standard Void type." href="../../../Void.html">Void</a></code></p></h3><div class="doc"><p>Adds this client to room clients and calls <code>joinPost()</code> callback.
Does not check whether this client is already in another room.</p>
<p>Sets "packages/room.id" and "packages/room.type" client variables.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>c</code> <p>Client to join the room.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="leave"></a><h3><p><code>    <a href="#leave"><span class="identifier">leave</span></a> (c:<a class="type" title="Client information class." href="../../../snipe/slave/ClientInfo.html">ClientInfo</a>):<a class="type" title="The standard Void type." href="../../../Void.html">Void</a></code></p></h3><div class="doc"><p>Removes this client from a list of clients and calls <code>leavePost()</code> callback.</p>
<p>Unsets the "packages/room.id" and "packages/room.type" client variables.</p>
<p>If one of the clients in the room disconnects, this method will be called automatically.</p>
<p>If the room is dead, <code>leavePost()</code> callback will not be called.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>c</code> <p>Client to remove from the room.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="replicate"></a><h3><p><code>    <a href="#replicate"><span class="identifier">replicate</span></a> (doFull:<a class="type" title="The standard Boolean type, which can either be true or false." href="../../../Bool.html">Bool</a> = false):<a class="type" title="The standard Void type." href="../../../Void.html">Void</a></code></p></h3><div class="doc"><p>Replicates updated or full public room state to clients.
Public state consists of fields defined in the _RoomType.replicated array.</p>
<p>The message will have a "packages/room.state" type with message fields containing room state fields.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>doFull</code> <p>If set to true, will do full state replication. Optional. If not enabled, will only replicate room fields that were updated.
Always clears the list of updated fields.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="tick"></a><h3><p><code>    <span class="label">dynamic</span> <a href="#tick"><span class="identifier">tick</span></a> (timePassed:<a class="type" title="The standard Float type, this is a double-precision IEEE 64bit float." href="../../../Float.html">Float</a>):<a class="type" title="The standard Void type." href="../../../Void.html">Void</a></code></p></h3><div class="doc"><p>Room time passage. Called periodically in the main server thread (the exact amount is specified in the room type).</p>
<p>Since the server cannot guarantee that this precise amount of time will pass since the last call, it will pass the time that passed since the last tick finished into the method call.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>timePassed</code> <p>How much time has actually passed since the last tick finished in seconds.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="updated"></a><h3><p><code>    <a href="#updated"><span class="identifier">updated</span></a> (key:<a class="type" title="The basic String class." href="../../../String.html">String</a>):<a class="type" title="The standard Void type." href="../../../Void.html">Void</a></code></p></h3><div class="doc"><p>Marks room field as changed. This will put the field in a list of changed fields until the <code>replicate()</code> method is called.
Should be called after each state change that will need to be propagated to the clients.</p>
<p>In case when the room is persistent, this will also update the block field which will be saved later.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>key</code> <p>Room instance field name.</p>        </div>    </div></div>                                                        </div>                            </div></div>        </div></div><footer class="section dark site-footer"><div class="container"><div class="copyright"><p>&copy;2017&nbsp;<a href="http://mini-it.ru/index_en.htm" title="Mini IT Website" class="hf-link">Mini IT Ltd</a></p></div></div></footer>    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script></body></html>