<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"/><link href="../../bootstrap/css/bootstrap.min.css" rel="stylesheet"/><link href="../../bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet"/><link href="../../bootstrap/css/bootstrap-select.min.css" rel="stylesheet"/><link href="http://fonts.googleapis.com/css?family=Open+Sans:400,700,700italic,400italic" rel="stylesheet" type="text/css"/><link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600,600italic,400" rel="stylesheet" type="text/css"/><link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css" rel="stylesheet" type="text/css"/><script src="../../jquery-1.9.1.min.js"></script><script src="../../bootstrap/js/bootstrap.min.js"></script><script src="../../bootstrap/js/bootstrap-select.min.js"></script><link href="../../styles.css" rel="stylesheet"/><script type="text/javascript">var dox = {rootPath: "../../",platforms: ["uniserver","stats","index","script"]};</script><script type="text/javascript" src="../..//nav.js"></script><script type="text/javascript" src="../..//index.js"></script><link rel="icon" href="../..//favicon.png" type="image/png"></link><title>snipe.slave.CacheManager</title></head><body><nav class="navbar dark navbar-static-top" role="navigation">  <div class="container" style="height:45px;">   <div class="navbar-header"><!--
	    <a class="brand" href="http://haxe.org/"><img src="http://haxe.org/img/haxe-logo-horizontal-on-dark.svg" width="107" height="21" alt="Haxe" onerror="this.src='http://haxe.org/img/haxe-logo-horizontal-on-dark.png'"/></a>-->
        <span class="tagline"><a href="/">Snipe Server API Documentation</a></span><div class="pull-right"><!--
			<a href="http://haxe.org/download/" target="_blank">Download</a> |
			<a href="http://haxe.org/manual/" target="_blank">Read the manual</a>
-->
</div>   </div>  </div></nav><div class="container">        <div class="row-fluid">            <div class="span3">              <div class="well sidebar-nav">                <form class="form-search" id="searchForm">                  <div class="input-prepend input-block-level">                    <span class="add-on"><i class="icon-search"></i></span>                    <input id="search" type="text" placeholder="Search" autocomplete="off"/>                  </div>                </form><!--
				<div class="dropdown">
					<select id="select-platform" class="selectpicker" title="Filter by platform" data-width="100%">
						<option value="all" selected="true">All Platforms</option>
						::foreach i api.config.platforms::
							<option>::i::</option>
						::end::
					</select>
				</div>
-->
</div>              <div class="well sidebar-nav">                <div id="nav"></div>              </div>            </div>            <div class="span9"><div class="page-header">                    <h4><small>package snipe.slave</small></h4>    <h1>            <small>class</small>            CacheManager        </h1>                                </div><div class="body">        <div class="doc doc-main">            <div class="indent">                <p>Data blocks cache manager.
None of the methods in this class are thread-safe, call only from main server thread.
Data blocks are described in detail in
<a target=_blank href="https://github.com/Mini-IT/SnipeWiki/wiki/DataBlocks">Data Blocks</a> article.</p>            </div>        </div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <h3 class="section">Methods</h3>        <div class="fields">                                                                                        <div class="field "><a name="create"></a><h3><p><code>    <a href="#create"><span class="identifier">create</span></a> (type:<a class="type" title="The basic String class." href="../../String.html">String</a>, id:<a class="type" title="The standard Int type." href="../../Int.html">Int</a>, ?attrs:<a class="type" title="Dynamic is a special type which is compatible with all other types." href="../../Dynamic.html">Dynamic</a>):<a class="type" title="The standard Boolean type, which can either be true or false." href="../../Bool.html">Bool</a></code></p></h3><div class="doc"><p>Creates a new data block in database.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>type</code> <p>Block type.</p>        </div>            <div class="indent inline-content">            <code>id</code> <p>Block ID.</p>        </div>            <div class="indent inline-content">            <code>attrs</code> <p>Optional. Data block attributes object.</p>        </div>        <p class="javadoc">Returns:</p>    <div class="indent inline-content">        <p>True on success, false otherwise. Currently always returns true.</p>    </div></div></div>                                                                                                                            <div class="field "><a name="get"></a><h3><p><code>    <a href="#get"><span class="identifier">get</span></a> (type:<a class="type" title="The basic String class." href="../../String.html">String</a>, id:<a class="type" title="The standard Int type." href="../../Int.html">Int</a>, currentVersion:<a class="type" title="The standard Int type." href="../../Int.html">Int</a>, ?oldBlock:<a class="type" title="Cache block." href="../../snipe/slave/Block.html">Block</a>):<a class="type" title="Return type for get data block operations." href="../../snipe/slave/_CacheReturnType.html">_CacheReturnType</a></code></p></h3><div class="doc"><p>Gets data block from cache server, locks it and returns it.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>type</code> <p>Block type.</p>        </div>            <div class="indent inline-content">            <code>id</code> <p>Block ID.</p>        </div>            <div class="indent inline-content">            <code>currentVersion</code> <p>Current block version.
Passed to optimize server to server traffic.</p>        </div>            <div class="indent inline-content">            <code>oldBlock</code> <p>Old block object.
Passed to properly store it in lock list in case of <code>sameVersion</code> error code.</p>        </div>        <p class="javadoc">Returns:</p>    <div class="indent inline-content">        <p>Error code and block object, if block is received.</p>    </div></div></div>                                                                                                                            <div class="field "><a name="getUnlocked"></a><h3><p><code>    <a href="#getUnlocked"><span class="identifier">getUnlocked</span></a> (type:<a class="type" title="The basic String class." href="../../String.html">String</a>, id:<a class="type" title="The standard Int type." href="../../Int.html">Int</a>, currentVersion:<a class="type" title="The standard Int type." href="../../Int.html">Int</a>):<a class="type" title="Return type for get data block operations." href="../../snipe/slave/_CacheReturnType.html">_CacheReturnType</a></code></p></h3><div class="doc"><p>Returns unlocked data block from cache server.</p>
<p>Note: Since the block can already be locked and written to on a different slave
server, the resulting block contents from cache server can be of an earlier version.
Use this method only for read operations where the immediate data freshness is not important.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>type</code> <p>Block type.</p>        </div>            <div class="indent inline-content">            <code>id</code> <p>Block ID.</p>        </div>            <div class="indent inline-content">            <code>currentVersion</code> <p>Current block version.
If the version is the same as on cache server, will return <code>sameVersion</code> error code.</p>        </div>        <p class="javadoc">Returns:</p>    <div class="indent inline-content">        <p>Error code and block object, if block is received.</p>    </div></div></div>                                                                                                                            <div class="field "><a name="isLocked"></a><h3><p><code>    <a href="#isLocked"><span class="identifier">isLocked</span></a> (block:<a class="type" title="Cache block." href="../../snipe/slave/Block.html">Block</a>):<a class="type" title="The standard Boolean type, which can either be true or false." href="../../Bool.html">Bool</a></code></p></h3><div class="doc"><p>Returns true if data block is locked by this slave server.
This operation is local.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>block</code> <p>Data block.</p>        </div>        <p class="javadoc">Returns:</p>    <div class="indent inline-content">        <p>True, if data block is locked. False otherwise.</p>    </div></div></div>                                                                                                                            <div class="field "><a name="unlock"></a><h3><p><code>    <a href="#unlock"><span class="identifier">unlock</span></a> (type:<a class="type" title="The basic String class." href="../../String.html">String</a>, id:<a class="type" title="The standard Int type." href="../../Int.html">Int</a>):<a class="type" title="The standard Void type." href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Unlocks data block on cache server.
This operation will succeed only if the block is locked by this slave server.
If the block is not actually locked by this server, nothing bad happens.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>type</code> <p>Block type.</p>        </div>            <div class="indent inline-content">            <code>id</code> <p>Block ID.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="update"></a><h3><p><code>    <a href="#update"><span class="identifier">update</span></a> (block:<a class="type" title="Cache block." href="../../snipe/slave/Block.html">Block</a>, unlock:<a class="type" title="The standard Boolean type, which can either be true or false." href="../../Bool.html">Bool</a>):<a class="type" title="The basic String class." href="../../String.html">String</a></code></p></h3><div class="doc"><p>Updates data block on cache server from local changes and unlocks it if unlock flag is set.</p>
<p>List of error codes:</p>
<p>ok - Operation successful.</p>
<p>mustBeLocked - Block must be locked by this slave server to update.</p>
<p>blockUpdateFailed - Reserved.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>block</code> <p>Data block.</p>        </div>            <div class="indent inline-content">            <code>unlock</code> <p>If true, will unlock this block on cache server.</p>        </div>        <p class="javadoc">Returns:</p>    <div class="indent inline-content">        <p>Operation error code.</p>    </div></div></div>                                                        </div>                            </div></div>        </div></div><footer class="section dark site-footer"><div class="container"><div class="copyright"><p>&copy;2017&nbsp;<a href="http://mini-it.ru/index_en.htm" title="Mini IT Website" class="hf-link">Mini IT Ltd</a></p></div></div></footer>    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script></body></html>