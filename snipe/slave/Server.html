<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"/><link href="../../bootstrap/css/bootstrap.min.css" rel="stylesheet"/><link href="../../bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet"/><link href="../../bootstrap/css/bootstrap-select.min.css" rel="stylesheet"/><link href="http://fonts.googleapis.com/css?family=Open+Sans:400,700,700italic,400italic" rel="stylesheet" type="text/css"/><link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600,600italic,400" rel="stylesheet" type="text/css"/><link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css" rel="stylesheet" type="text/css"/><script src="../../jquery-1.9.1.min.js"></script><script src="../../bootstrap/js/bootstrap.min.js"></script><script src="../../bootstrap/js/bootstrap-select.min.js"></script><link href="../../styles.css" rel="stylesheet"/><script type="text/javascript">var dox = {rootPath: "../../",platforms: ["uniserver","stats","index"]};</script><script type="text/javascript" src="../..//nav.js"></script><script type="text/javascript" src="../..//index.js"></script><link rel="icon" href="../..//favicon.png" type="image/png"></link><title>snipe.slave.Server</title></head><body><nav class="navbar dark navbar-static-top" role="navigation">  <div class="container" style="height:45px;">   <div class="navbar-header"><!--       
	    <a class="brand" href="http://haxe.org/"><img src="http://haxe.org/img/haxe-logo-horizontal-on-dark.svg" width="107" height="21" alt="Haxe" onerror="this.src='http://haxe.org/img/haxe-logo-horizontal-on-dark.png'"/></a>-->
    <span class="tagline">Snipe Server API Documentation</span><div class="pull-right"><!--        
			<a href="http://haxe.org/download/" target="_blank">Download</a> |
			<a href="http://haxe.org/manual/" target="_blank">Read the manual</a>
-->
</div>   </div>  </div></nav><div class="container">        <div class="row-fluid">            <div class="span3">              <div class="well sidebar-nav">                <form class="form-search" id="searchForm">                  <div class="input-prepend input-block-level">                    <span class="add-on"><i class="icon-search"></i></span>                    <input id="search" type="text" placeholder="Search" autocomplete="off"/>                  </div>                </form><!--                
				<div class="dropdown">
					<select id="select-platform" class="selectpicker" title="Filter by platform" data-width="100%">
						<option value="all" selected="true">All Platforms</option>
						::foreach i api.config.platforms::
							<option>::i::</option>
						::end::
					</select>
				</div>
-->
</div>              <div class="well sidebar-nav">                <div id="nav"></div>              </div>            </div>            <div class="span9"><div class="page-header">                    <h4><small>package snipe.slave</small></h4>    <h1>            <small>class</small>            Server        </h1>                        <div>                                    <span class="muted">extended by</span>    <a class="type" title="Game service slave server class." href="../../snipe/slave/ServerGame.html">ServerGame</a>        </div>        </div><div class="body">        <div class="doc doc-main">            <div class="indent">                <p>Slave server class.</p>
<p>Note: API in this class is not thread-safe and intended to be called
only from the main worker thread with the one exception: <code>work()</code>.</p>            </div>        </div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <h3 class="section">Constructor</h3>        <div class="fields">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <div class="field "><a name="new"></a><h3><p><code>    <a href="#new"><span class="identifier">new</span></a> (metav:<a class="type" title="Metaserver class." href="../../snipe/slave/MetaServer.html">MetaServer</a>, idv:<a class="type" title="The standard Int type." href="../../Int.html">Int</a>)</code></p></h3><div class="doc"><p></p></div></div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <h3 class="section">Fields</h3>        <div class="fields">                                                                        <div class="field "><a name="cacheManager"></a><h3><p><code>                        <span class="label">read only</span>                        <a href="#cacheManager"><span class="identifier">cacheManager</span></a>:<a class="type" title="Data blocks cache manager." href="../../snipe/slave/CacheManager.html">CacheManager</a></code></p></h3><div class="doc"><p>Data blocks cache manager.</p></div></div>                                                                                            <div class="field "><a name="clientTimer"></a><h3><p><code>                        <span class="label">read only</span>                        <a href="#clientTimer"><span class="identifier">clientTimer</span></a>:<a class="type" title="Client timer for recurring tasks." href="../../snipe/slave/ClientTimer.html">ClientTimer</a></code></p></h3><div class="doc"><p>Client timer for recurring tasks.</p></div></div>                                                                                            <div class="field "><a name="clients"></a><h3><p><code>                        <span class="label">read only</span>                        <a href="#clients"><span class="identifier">clients</span></a>:<a class="type" title="A linked-list of elements." href="../../List.html">List</a>&lt;<a class="type" title="Client information class." href="../../snipe/slave/ClientInfo.html">ClientInfo</a>&gt;</code></p></h3><div class="doc"><p>Clients list. 
Do not add or remove clients directly.</p></div></div>                                                                                            <div class="field "><a name="config"></a><h3><p><code>                        <span class="label">read only</span>                        <a href="#config"><span class="identifier">config</span></a>:<a class="type" title="Configuration file API - loading, parsing and access to variables." href="../../snipe/lib/Config.html">Config</a></code></p></h3><div class="doc"><p>Server configuration file access.</p></div></div>                                                                                            <div class="field "><a name="configCompression"></a><h3><p><code>                        <span class="label">read only</span>                        <a href="#configCompression"><span class="identifier">configCompression</span></a>:<a class="type" title="The standard Int type." href="../../Int.html">Int</a></code></p></h3><div class="doc"><p>Cached configuration variable.
Enables message compression.</p></div></div>                                                                                            <div class="field "><a name="configCompressionLevel"></a><h3><p><code>                        <span class="label">read only</span>                        <a href="#configCompressionLevel"><span class="identifier">configCompressionLevel</span></a>:<a class="type" title="The standard Int type." href="../../Int.html">Int</a></code></p></h3><div class="doc"><p>Cached configuration variable.
Message compression level (1-9).</p></div></div>                                                                                            <div class="field "><a name="configLogTime"></a><h3><p><code>                        <span class="label">read only</span>                        <a href="#configLogTime"><span class="identifier">configLogTime</span></a>:<a class="type" title="The standard Boolean type, which can either be true or false." href="../../Bool.html">Bool</a></code></p></h3><div class="doc"><p>Cached configuration variable.
If set to true, will log time spent on each client request.</p></div></div>                                                                                            <div class="field "><a name="coreModuleParams"></a><h3><p><code>                        <span class="label">read only</span>                        <a href="#coreModuleParams"><span class="identifier">coreModuleParams</span></a>:<a class="type" title="Core module parameters." href="../../snipe/slave/_CoreModuleParams.html">_CoreModuleParams</a></code></p></h3><div class="doc"><p>Core module parameters.</p></div></div>                                                                                            <div class="field "><a name="coreVarsModule"></a><h3><p><code>                                    <a href="#coreVarsModule"><span class="identifier">coreVarsModule</span></a>:<a class="type" title="Game variables access." href="../../snipe/slave/modules/VarsModuleCore.html">VarsModuleCore</a></code></p></h3><div class="doc"><p>Game variables module.</p></div></div>                                                                                            <div class="field "><a name="id"></a><h3><p><code>                        <span class="label">read only</span>                        <a href="#id"><span class="identifier">id</span></a>:<a class="type" title="The standard Int type." href="../../Int.html">Int</a></code></p></h3><div class="doc"><p>Local server ID.</p></div></div>                                                                                            <div class="field "><a name="localeManager"></a><h3><p><code>                        <span class="label">read only</span>                        <a href="#localeManager"><span class="identifier">localeManager</span></a>:<a class="type" title="Localization manager." href="../../snipe/slave/LocaleManager.html">LocaleManager</a></code></p></h3><div class="doc"><p>Localization manager.</p></div></div>                                                                                            <div class="field "><a name="name"></a><h3><p><code>                        <span class="label">read only</span>                        <a href="#name"><span class="identifier">name</span></a>:<a class="type" title="The basic String class." href="../../String.html">String</a></code></p></h3><div class="doc"><p>Local server name.</p></div></div>                                                                                            <div class="field "><a name="profiler"></a><h3><p><code>                        <span class="label">read only</span>                        <a href="#profiler"><span class="identifier">profiler</span></a>:<span class="type">Profiler</span></code></p></h3><div class="doc"><p>Server profiler.</p></div></div>                                                                                            <div class="field "><a name="serverType"></a><h3><p><code>                        <span class="label">read only</span>                        <a href="#serverType"><span class="identifier">serverType</span></a>:<a class="type" title="The basic String class." href="../../String.html">String</a></code></p></h3><div class="doc"><p>Server type. Sent to cache server on server login.</p></div></div>                                                                                            <div class="field "><a name="slaveID"></a><h3><p><code>                                    <a href="#slaveID"><span class="identifier">slaveID</span></a>:<a class="type" title="The standard Int type." href="../../Int.html">Int</a></code></p></h3><div class="doc"><p>Unique server ID on cache server.
This variable is set on server login.</p></div></div>                                                                                            <div class="field "><a name="temp"></a><h3><p><code>                        <span class="label">read only</span>                        <a href="#temp"><span class="identifier">temp</span></a>:<a class="type" title="Local temp directory access module." href="../../snipe/lib/Temp.html">Temp</a></code></p></h3><div class="doc"><p>Temp directory reader/writer.</p></div></div>                                                                                            <div class="field "><a name="timer"></a><h3><p><code>                        <span class="label">read only</span>                        <a href="#timer"><span class="identifier">timer</span></a>:<a class="type" title="Server timer for recurring complicated tasks." href="../../snipe/slave/Timer.html">Timer</a></code></p></h3><div class="doc"><p>Timer for running recurring tasks.</p></div></div>                                                                                            <div class="field "><a name="url"></a><h3><p><code>                        <span class="label">read only</span>                        <a href="#url"><span class="identifier">url</span></a>:<a class="type" title="Threaded HTTP request manager." href="../../snipe/slave/URLRequester.html">URLRequester</a></code></p></h3><div class="doc"><p>Threaded HTTP request manager.</p></div></div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <h3 class="section">Methods</h3>        <div class="fields">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <div class="field "><a name="addModule"></a><h3><p><code>    <span class="label">inline</span> <a href="#addModule"><span class="identifier">addModule</span></a> (m:<a class="type" title="Dynamic is a special type which is compatible with all other types." href="../../Dynamic.html">Dynamic</a>):<a class="type" title="The standard Void type." href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Adds initialized module to list.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>m</code> <p>Server module.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="addNoLoginRequests"></a><h3><p><code>    <span class="label">inline</span> <a href="#addNoLoginRequests"><span class="identifier">addNoLoginRequests</span></a> (list:<a class="type" title="An Array is a storage for values." href="../../Array.html">Array</a>&lt;<a class="type" title="The basic String class." href="../../String.html">String</a>&gt;):<a class="type" title="The standard Void type." href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Client request types that are given as a parameter will not require client login
to work.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>list</code> <p>Client request types in the <code>&lt;module&gt;.&lt;name&gt;</code> format.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="cacheNotify"></a><h3><p><code>    <span class="label">inline</span> <a href="#cacheNotify"><span class="identifier">cacheNotify</span></a> (msg:<a class="type" title="Dynamic is a special type which is compatible with all other types." href="../../Dynamic.html">Dynamic</a>):<a class="type" title="The standard Void type." href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Sends notification to cache server without waiting for response.
The notification will be added to the queue, the contents of which will be sent with the next message.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>msg</code> <p>Notification parameters.
Should have the <code>_type</code> field that sets the notification type in the <code>&lt;module&gt;.&lt;method&gt;</code> format.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="cacheRequest"></a><h3><p><code>    <span class="label">inline</span> <a href="#cacheRequest"><span class="identifier">cacheRequest</span></a> (params:<a class="type" title="Dynamic is a special type which is compatible with all other types." href="../../Dynamic.html">Dynamic</a>):<a class="type" title="Dynamic is a special type which is compatible with all other types." href="../../Dynamic.html">Dynamic</a></code></p></h3><div class="doc"><p>Sends request to cache server and waits for response.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>params</code> <p>Request parameters.
Should have the <code>_type</code> field that sets the request type in the <code>&lt;module&gt;.&lt;method&gt;</code> format.</p>        </div>        <p class="javadoc">Returns:</p>    <div class="indent inline-content">        <p>Cache server response parameters.</p>    </div></div></div>                                                                                                                            <div class="field "><a name="disconnect"></a><h3><p><code>    <span class="label">inline</span> <a href="#disconnect"><span class="identifier">disconnect</span></a> (c:<a class="type" title="Client information class." href="../../snipe/slave/ClientInfo.html">ClientInfo</a>):<a class="type" title="The standard Void type." href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Immediately disconnects a client and triggers disconnect hooks.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>c</code> <p>Client.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="getClientByConnectionID"></a><h3><p><code>    <a href="#getClientByConnectionID"><span class="identifier">getClientByConnectionID</span></a> (id:<a class="type" title="The standard Int type." href="../../Int.html">Int</a>):<a class="type" title="Client information class." href="../../snipe/slave/ClientInfo.html">ClientInfo</a></code></p></h3><div class="doc"><p>Returns client by his connection id.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>id</code> <p>Connection ID.</p>        </div>        <p class="javadoc">Returns:</p>    <div class="indent inline-content">        <p>Client. Returns null, if no such client is online.</p>    </div></div></div>                                                                                                                            <div class="field "><a name="getClientInternal"></a><h3><p><code>    <a href="#getClientInternal"><span class="identifier">getClientInternal</span></a> (id:<a class="type" title="The standard Int type." href="../../Int.html">Int</a>, onlineOnly:<a class="type" title="The standard Boolean type, which can either be true or false." href="../../Bool.html">Bool</a>):<a class="type" title="Client information class." href="../../snipe/slave/ClientInfo.html">ClientInfo</a></code></p></h3><div class="doc"><p>Returns a client from a list of clients.
Can create and populate the client instance with <code>createClientFromCache()</code> if no such client is online.</p>
<p>Note: You can declare <code>getClient()</code> method on top of that to return the proper client class.</p>
<pre><code>public inline function getClient(id: Int, ?onlineOnly: Bool): MyClient
  {
    return untyped getClientInternal(id, onlineOnly);
  }</code></pre>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>id</code> <p>Client ID.</p>        </div>            <div class="indent inline-content">            <code>onlineOnly</code> <p>If true, will not try to create a new client when needed.
If false or null, will create a new client instance when client is not logged on and return it.
The new client instance is not added to client list.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="getModule"></a><h3><p><code>    <a href="#getModule"><span class="identifier">getModule</span></a> (name:<a class="type" title="The basic String class." href="../../String.html">String</a>):<a class="type" title="Dynamic is a special type which is compatible with all other types." href="../../Dynamic.html">Dynamic</a></code></p></h3><div class="doc"><p>Returns server module by its name.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>name</code> <p>Module name.</p>        </div>        <p class="javadoc">Returns:</p>    <div class="indent inline-content">        <p>Module. Null, if no such module found.</p>    </div></div></div>                                                                                                                            <div class="field "><a name="getSubscribedMethods"></a><h3><p><code>    <a href="#getSubscribedMethods"><span class="identifier">getSubscribedMethods</span></a> (tag:<a class="type" title="The basic String class." href="../../String.html">String</a>):<a class="type" title="&lt;code&gt;&lt;a href="." href="../../Null.html">Null</a>&lt;<a class="type" title="A linked-list of elements." href="../../List.html">List</a>&lt;<a class="type" title="Dynamic is a special type which is compatible with all other types." href="../../Dynamic.html">Dynamic</a>&gt;&gt;</code></p></h3><div class="doc"><p>Returns a list of subscribed methods for a given event type.
Module subscription API is described in detail in
<a target=_blank href="https://github.com/Mini-IT/SnipeWiki/wiki/SubscriptionsServer">Subscriptions</a> article.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>tag</code> <p>Event type.</p>        </div>        <p class="javadoc">Returns:</p>    <div class="indent inline-content">        <p>List of methods subscribed to this event type.</p>    </div></div></div>                                                                                                                            <div class="field "><a name="getSubscribedModules"></a><h3><p><code>    <a href="#getSubscribedModules"><span class="identifier">getSubscribedModules</span></a> (tag:<a class="type" title="The basic String class." href="../../String.html">String</a>):<a class="type" title="&lt;code&gt;&lt;a href="." href="../../Null.html">Null</a>&lt;<a class="type" title="A linked-list of elements." href="../../List.html">List</a>&lt;<a class="type" title="Base slave server module class." href="../../snipe/slave/Module.html">Module</a>&lt;<a class="type" title="Client information class." href="../../snipe/slave/ClientInfo.html">ClientInfo</a>, <a class="type" title="Slave server class." href="../../snipe/slave/Server.html">Server</a>&gt;&gt;&gt;</code></p></h3><div class="doc"><p>Returns a list of subscribed modules for a given event type.
Module subscription API is described in detail in
<a target=_blank href="https://github.com/Mini-IT/SnipeWiki/wiki/SubscriptionsServer">Subscriptions</a> article.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>tag</code> <p>Event type.</p>        </div>        <p class="javadoc">Returns:</p>    <div class="indent inline-content">        <p>List of modules subscribed to this event type.</p>    </div></div></div>                                                                                                                            <div class="field "><a name="initModules"></a><h3><p><code>    <span class="label">dynamic</span> <a href="#initModules"><span class="identifier">initModules</span></a> ():<a class="type" title="The standard Void type." href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Initializes project server modules.
This method is called from <code>initServer()</code>.
Intended to call <code>addModule()</code> or <code>loadModules()</code>.</p></div></div>                                                                                                                            <div class="field "><a name="loadModules"></a><h3><p><code>    <a href="#loadModules"><span class="identifier">loadModules</span></a> (list:<a class="type" title="An Array is a storage for values." href="../../Array.html">Array</a>&lt;<a class="type" title="Dynamic is a special type which is compatible with all other types." href="../../Dynamic.html">Dynamic</a>&gt;):<a class="type" title="The standard Void type." href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Loads a list of server modules.
Should be called in <code>initModules()</code>.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>list</code> <p>List of module classes to load.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="log"></a><h3><p><code>    <span class="label">inline</span> <a href="#log"><span class="identifier">log</span></a> (type:<a class="type" title="The basic String class." href="../../String.html">String</a>, s:<a class="type" title="The basic String class." href="../../String.html">String</a>, logEx:<a class="type" title="The standard Boolean type, which can either be true or false." href="../../Bool.html">Bool</a>):<a class="type" title="The standard Void type." href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Adds a typed message to server log.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>type</code> <p>Message type.</p>        </div>            <div class="indent inline-content">            <code>s</code> <p>Message to log.</p>        </div>            <div class="indent inline-content">            <code>logEx</code> <p>If true, also logs call stack.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="loginSuccess"></a><h3><p><code>    <a href="#loginSuccess"><span class="identifier">loginSuccess</span></a> (client:<a class="type" title="Client information class." href="../../snipe/slave/ClientInfo.html">ClientInfo</a>, params:<a class="type" title="Client request parameters." href="../../snipe/lib/Params.html">Params</a>):<a class="type" title="The standard Void type." href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Notifies the server that the client has successfully logged in.
Calls login hooks and sends <code>user.login</code> response to the client.
This is called automatically in all supported cases but can be needed in case
of unsupported SNS type that has a delayed login like Kongregate.
Kongregate itself is supported.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>client</code> <p>Client.</p>        </div>            <div class="indent inline-content">            <code>params</code> <p>Login request parameters.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="nextID"></a><h3><p><code>    <a href="#nextID"><span class="identifier">nextID</span></a> (t:<a class="type" title="The basic String class." href="../../String.html">String</a>):<a class="type" title="The standard Int type." href="../../Int.html">Int</a></code></p></h3><div class="doc"><p>Returns next available row ID from sequence for given database table.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>t</code> <p>Database table name.</p>        </div>        <p class="javadoc">Returns:</p>    <div class="indent inline-content">        <p>Next available row ID.</p>    </div></div></div>                                                                                                                            <div class="field "><a name="notify"></a><h3><p><code>    <a href="#notify"><span class="identifier">notify</span></a> (id:<a class="type" title="The standard Int type." href="../../Int.html">Int</a>, msg:<a class="type" title="Dynamic is a special type which is compatible with all other types." href="../../Dynamic.html">Dynamic</a>):<a class="type" title="The basic String class." href="../../String.html">String</a></code></p></h3><div class="doc"><p>Sends message through cache server to a game server that this client is logged on.
If the client is on the same server, the message stays local.
If the client is offline, the message is sent to first game server and the client will be initialized from database and marked as offline.
You can add validation parameters to message as described in <code>_NotifyValidateParams</code>.
Server notifications are described in detail in
<a target=_blank href="https://github.com/Mini-IT/SnipeWiki/wiki/NotificationsServer">Notifications</a> article.</p>
<p>Usage cheatsheet:</p>
<pre><code>// client 1 on server 1 gives money to client 2 on server 2
server.notify(id, { // client 2 ID
  // method to call (called on server 2):
  // UserModule.giveMoney2(c2: Client, msg: { from: Int, amount: Int })
  _type: 'user.giveMoney2', 

  // client 2 ID
  _id: id,

  _validate: {
    // validation function (called on server 2):
    // UserModule.giveMoneyValidate(c2: Client, msg: { from: Int, amount: Int })
    // should return `{ errorCode: 'ok', ... }` on success
    func: 'user.giveMoneyValidate',

    // success handler (called on server 1):
    // UserModule.giveMoney3(c: Client, msg: { from: Int, amount: Int, ... })
    // msg has original call parameters + parameters returned by giveMoney2()
    // can make a response to client 1
    onSuccess: 'user.giveMoney3',

    // failure handler (called on server 1):
    // UserModule.giveMoneyFail(c: Client, msg: { from: Int, amount: Int })
    // can make a response to client 1
    onFail: 'user.giveMoneyFail',

    // client 1 ID
    id: fromID 
    },

  // notification parameters
  from: fromID,
  amount: amount 
  });</code></pre>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>id</code> <p>Client ID.</p>        </div>            <div class="indent inline-content">            <code>msg</code> <p>Message parameters.
Can have <code>_validate</code> field with validation parameters.
If the parameters object has "_id" field, the notification handler will be 
passed <code><a href="../../snipe/slave/ClientInfo.html">ClientInfo</a></code> object with this client ID as an argument. </p>        </div>        <p class="javadoc">Returns:</p>    <div class="indent inline-content">        <p>Operation error code.
<code>noSlavesOnline</code> - no game slave server.
<code>ok</code> - operation successful.</p>    </div></div></div>                                                                                                                            <div class="field "><a name="onJoinNotify"></a><h3><p><code>    <span class="label">dynamic</span> <a href="#onJoinNotify"><span class="identifier">onJoinNotify</span></a> (client:<a class="type" title="Client information class." href="../../snipe/slave/ClientInfo.html">ClientInfo</a>):<a class="type" title="The standard Void type." href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Event hook.
Notifies all clients that new client has joined with <code>user.join</code> messages by default.
The message have a single <code>name</code> parameter with the new client name.
This method is called in <code>loginSuccess()</code>.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>client</code> <p>Client.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="pending"></a><h3><p><code>    <span class="label">inline</span> <a href="#pending"><span class="identifier">pending</span></a> (q:<a class="type" title="The basic String class." href="../../String.html">String</a>):<a class="type" title="The standard Void type." href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Sends SQL query to cache server for execution and immediately returns.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>q</code> <p>SQL query string.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="print"></a><h3><p><code>    <span class="label">inline</span> <a href="#print"><span class="identifier">print</span></a> (s:<a class="type" title="The basic String class." href="../../String.html">String</a>):<a class="type" title="The standard Void type." href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Prints a string to stdout.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>s</code> <p>String to output.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="query"></a><h3><p><code>    <a href="#query"><span class="identifier">query</span></a> (q:<a class="type" title="The basic String class." href="../../String.html">String</a>):<a class="type" title="A linked-list of elements." href="../../List.html">List</a>&lt;<a class="type" title="Dynamic is a special type which is compatible with all other types." href="../../Dynamic.html">Dynamic</a>&gt;</code></p></h3><div class="doc"><p>Runs SQL query through cache server in database.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>q</code> <p>SQL query string.</p>        </div>        <p class="javadoc">Returns:</p>    <div class="indent inline-content">        <p>A list of results if the query is of SELECT type. Null otherwise.</p>    </div></div></div>                                                                                                                            <div class="field "><a name="queryTrace"></a><h3><p><code>    <a href="#queryTrace"><span class="identifier">queryTrace</span></a> (q:<a class="type" title="The basic String class." href="../../String.html">String</a>):<a class="type" title="A linked-list of elements." href="../../List.html">List</a>&lt;<a class="type" title="Dynamic is a special type which is compatible with all other types." href="../../Dynamic.html">Dynamic</a>&gt;</code></p></h3><div class="doc"><p>Runs SQL query through cache server in database and logs it in trace log.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>q</code> <p>SQL query string.</p>        </div>        <p class="javadoc">Returns:</p>    <div class="indent inline-content">        <p>A list of results if the query is of SELECT type. Null otherwise.</p>    </div></div></div>                                                                                                                            <div class="field "><a name="quote"></a><h3><p><code>    <span class="label">inline</span> <a href="#quote"><span class="identifier">quote</span></a> (s:<a class="type" title="The basic String class." href="../../String.html">String</a>):<a class="type" title="The basic String class." href="../../String.html">String</a></code></p></h3><div class="doc"><p>Escapes a string for using in SQL query as a row field.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>s</code> <p>String.</p>        </div>        <p class="javadoc">Returns:</p>    <div class="indent inline-content">        <p>Escaped string.</p>    </div></div></div>                                                                                                                            <div class="field "><a name="sendTo"></a><h3><p><code>    <a href="#sendTo"><span class="identifier">sendTo</span></a> (id:<a class="type" title="The standard Int type." href="../../Int.html">Int</a>, msg:<a class="type" title="Dynamic is a special type which is compatible with all other types." href="../../Dynamic.html">Dynamic</a>):<a class="type" title="The basic String class." href="../../String.html">String</a></code></p></h3><div class="doc"><p>Sends message to a client that is logged on a different game server.</p>
<p>Note: If client is on the same server, sends message directly.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>id</code> <p>Client ID.</p>        </div>            <div class="indent inline-content">            <code>msg</code> <p>Message parameters.
Message type must be given in a <code>_type</code> field.</p>        </div>        <p class="javadoc">Returns:</p>    <div class="indent inline-content">        <p>Operation error code.
<code>userNotOnline</code> - user is not online.
<code>ok</code> - operation successful.</p>    </div></div></div>                                                                                                                            <div class="field "><a name="stats"></a><h3><p><code>    <span class="label">inline</span> <a href="#stats"><span class="identifier">stats</span></a> (s:<a class="type" title="The basic String class." href="../../String.html">String</a>):<a class="type" title="The standard Void type." href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Adds a stats message to stats log.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>s</code> <p>Message to log.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="subscribeMethod"></a><h3><p><code>    <a href="#subscribeMethod"><span class="identifier">subscribeMethod</span></a> (tag:<a class="type" title="The basic String class." href="../../String.html">String</a>, method:<a class="type" title="Dynamic is a special type which is compatible with all other types." href="../../Dynamic.html">Dynamic</a>):<a class="type" title="The standard Void type." href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Subscribes method to an event.
Module subscription API is described in detail in
<a target=_blank href="https://github.com/Mini-IT/SnipeWiki/wiki/SubscriptionsServer">Subscriptions</a> article.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>tag</code> <p>Event type.</p>        </div>            <div class="indent inline-content">            <code>method</code> <p>Method.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="subscribeModule"></a><h3><p><code>    <a href="#subscribeModule"><span class="identifier">subscribeModule</span></a> (tag:<a class="type" title="The basic String class." href="../../String.html">String</a>, module:<a class="type" title="Dynamic is a special type which is compatible with all other types." href="../../Dynamic.html">Dynamic</a>):<a class="type" title="The standard Void type." href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Subscribes module to an event.
Module subscription API is described in detail in
<a target=_blank href="https://github.com/Mini-IT/SnipeWiki/wiki/SubscriptionsServer">Subscriptions</a> article.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>tag</code> <p>Event type.</p>        </div>            <div class="indent inline-content">            <code>module</code> <p>Server module.</p>        </div>    </div></div>                                                                                                                            <div class="field "><a name="work"></a><h3><p><code>    <span class="label">inline</span> <a href="#work"><span class="identifier">work</span></a> (f:<a class="type" title="The standard Void type." href="../../Void.html">Void</a>&nbsp;&#8209;&gt;&nbsp;<a class="type" title="The standard Void type." href="../../Void.html">Void</a>):<a class="type" title="The standard Void type." href="../../Void.html">Void</a></code></p></h3><div class="doc"><p>Sends task to worker thread.
The method given as an argument will be called in main worker thread.
This method is thread-safe.</p>    <p class="javadoc">Parameters:</p>            <div class="indent inline-content">            <code>f</code> <p>Method to call.</p>        </div>    </div></div>                                                        </div>                            </div></div>        </div></div><footer class="section dark site-footer"><div class="container"><div class="copyright"><p>&copy;2015&nbsp;<a href="http://mini-it.ru/index_en.htm" title="Mini IT Website" class="hf-link">Mini IT Ltd</a></p></div></div></footer>    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script></body></html>